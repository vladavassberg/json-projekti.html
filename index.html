<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JSON-datan käsittelyä</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body class="d-flex flex-column min-vh-100">

<nav class="navbar navbar-expand-lg navbar-custom">
  <div class="container-fluid">
  
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="index.html">Etusivu</a></li>
        <li class="nav-item"><a class="nav-link" href="toteutus.html">Digipalvelut</a></li>
        <li class="nav-item"><a class="nav-link" href="pokehaku.html">Pokemon haku</a></li>
        <li class="nav-item"><a class="nav-link" href="weather.html">Säätiedot</a></li>
      </ul>
    </div>
  </div>
</nav>

<main class="flex-fill">
<section class="container my-5">
<div id="json-content"></div>
</section>
</main>

<footer class="mt-auto">
  <p class="text-center">JSON-datan käsittely</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  fetch('tietue.json')
    .then(function(response) {
      if (!response.ok) throw new Error("Verkkovirhe " + response.status);
      return response.json();
    })
    .then(function(data) {
      kerro(data);
    })
    .catch(function(error) {
      document.getElementById("json-content").innerHTML = "<p>Tietoa ei pystytä hakemaan</p>";
      console.error("Virhe JSON-haussa:", error);
    });

  function kerro(obj) {
    let tiedot = `
      <h1>${obj.otsikko}</h1>
      <p>${obj.kuvaus}</p>
      <p><img src="${obj.kuva}" alt="Kuva" style="max-width:300px;"></p>
      
      <h3>Opintojakso</h3>
      <ul>
        <li><b>Nimi:</b> ${obj.opintojakso.nimi}</li>
        <li><b>Tunnus:</b> ${obj.opintojakso.tunnus}</li>
        <li><b>Opintopisteet:</b> ${obj.opintojakso.opintopisteet}</li>
      </ul>
      
      <h3>Sisältö</h3>
      <ul>
    `;

    // For-silmukka sisällölle
    for (let i = 0; i < obj.sisalto.length; i++) {
      tiedot += `<li>${obj.sisalto[i]}</li>`;
    }

    tiedot += `</ul><h3>Tekniikat</h3><ul>`;

    // For-silmukka tekniikoille
    for (let i = 0; i < obj.tekniikat.length; i++) {
      tiedot += `<li><b>${obj.tekniikat[i].aihe}:</b> 
                  <a href="${obj.tekniikat[i].linkki}" target="_blank">
                  ${obj.tekniikat[i].linkki}</a></li>`;
    }

    tiedot += `</ul>`;

    document.getElementById("json-content").innerHTML = tiedot;
  }
</script>



</body>
</html>
